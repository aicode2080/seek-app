"use strict";const{ESLint:t}=require("eslint");module.exports=async function(r={}){const{targetDir:e=process.cwd(),extensions:n=[".js",".jsx",".ts",".tsx"],fix:o=!1,ignorePath:s=".eslintignore"}=r;try{console.log(`执行目录：${e}`);const r=new t({cwd:e,fix:o}),n=await r.lintFiles(["."]),s=await r.lintFiles(n.map((t=>t.filePath))),i=(await r.loadFormatter("stylish")).format(s);console.log(i);return s.reduce(((t,r)=>{var e;return function(){const t=process.version;return parseInt(t.split(".")[0].replace("v",""))>=14}()?t+(null!==(e=null==r?void 0:r.errorCount)&&void 0!==e?e:0):t+(r&&r.errorCount?r.errorCount:0)}),0)}catch(t){return console.error("ESLint 检查失败：",t.message),1}};
