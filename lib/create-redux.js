import e from"commander";import t from"fs";import o,{dirname as r}from"path";import{fileURLToPath as a}from"url";import n from"inquirer";const i=r(a(import.meta.url)),c=JSON.parse(t.readFileSync(o.join(i,"../package.json"),"utf8")),p=o.join(i,"../template/redux-module/slice.ts"),s=o.join(i,"../template/redux-module/store.ts");e.name("redux-module").version(c.version).description("自动化创建一个redux模块").option("-n, --name <name>","Project name").option("-p, --path <path>","Path to create the project").action((async()=>{const r=e.opts().name,a=e.opts().path||process.cwd(),i=await n.prompt([{type:"input",name:"name",message:'Enter project name:(默认是"Redux Module")',default:r},{type:"input",name:"path",message:'Enter the path to create the project:（默认是"./"）',default:a}]),c=i.name,m=o.resolve(i.path);!async function(e,r){try{const a="slice.tsx",n="store.tsx",i=o.join(r,a),c=o.join(r,n);t.mkdirSync(r,{recursive:!0});const m=await t.readFileSync(p,"utf8"),u=await t.readFileSync(s,"utf8"),l=m.replace("Redux Module","我是自动化创建文件");await t.writeFileSync(c,u,"utf8"),await t.writeFileSync(i,l,"utf8"),console.log(`Created ${e} in ${r}`)}catch(e){console.error("Error creating React module:",e)}}(c,o.join(m,c))})),e.parse(process.argv);
