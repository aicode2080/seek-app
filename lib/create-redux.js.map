{"version":3,"file":"create-redux.js","sources":["../src/create-redux.js"],"sourcesContent":["const commander = require('commander');\n\nconst fs = require('fs');\nconst path = require('path');\nconst packageJson = require('../package.json');\nconst inquirer = require('inquirer');\n\n// 定义模板文件路径\nconst templatePath = path.join(__dirname, '../template/redux-module/slice.ts');\nconst templateCssPath = path.join(__dirname, '../template/redux-module/store.ts');\n\ncommander\n  .name('redux-module')\n  .version(packageJson.version)\n  .description('自动化创建一个redux模块')\n  .option('-n, --name <name>', 'Project name')\n  .option('-p, --path <path>', 'Path to create the project')\n  .action(async () => {\n    // 使用 commander 获取的选项作为默认值（如果提供了的话）\n    const defaultName = commander.opts().name;\n    const defaultPath = commander.opts().path || process.cwd(); // 如果没有指定路径，则使用当前工作目录\n\n    // 使用 inquirer 获取用户输入\n    const answers = await inquirer.prompt([\n      {\n        type: 'input',\n        name: 'name',\n        message: 'Enter project name:(默认是\"Redux Module\")',\n        default: defaultName, // 提供 commander 提供的默认值作为 inquirer 的默认值\n      },\n      {\n        type: 'input',\n        name: 'path',\n        message: 'Enter the path to create the project:（默认是\"./\"）',\n        default: defaultPath, // 提供 commander 提供的默认值作为 inquirer 的默认值\n      },\n    ]);\n\n    const projectName = answers.name;\n    const projectPath = path.resolve(answers.path); // 解析路径为绝对路径，确保路径正确性\n    const projectDir = path.join(projectPath, projectName); // 组合路径和项目名以形成完整项目路径\n    createReactModule(projectName, projectDir);\n  });\n\n// 异步函数来创建文件\nasync function createReactModule(proName, dir) {\n  try {\n    const targetFileName = 'slice.tsx'; // 可以根据需要修改文件名\n    const targetCssFileName = 'store.tsx'; // 可以根据需要修改文件名\n    const targetPath = path.join(dir, targetFileName);\n    const targetCssPath = path.join(dir, targetCssFileName);\n    // 创建项目目录结构（示例）\n    fs.mkdirSync(dir, { recursive: true }); // 创建目录，包括父目录（如果需要的话）\n    // 读取模板文件内容\n    const templateContent = await fs.readFileSync(templatePath, 'utf8');\n    const templateCssContent = await fs.readFileSync(templateCssPath, 'utf8');\n\n    // 根据需要修改模板内容\n    // 例如，替换默认的模块名称或其他占位符\n    const modifiedContent = templateContent.replace(\n      'Redux Module',\n      '我是自动化创建文件'\n    );\n    await fs.writeFileSync(targetCssPath, templateCssContent, 'utf8');\n    // 写入新文件\n    await fs.writeFileSync(targetPath, modifiedContent, 'utf8');\n    console.log(`Created ${proName} in ${dir}`);\n  } catch (error) {\n    console.error('Error creating React module:', error);\n  }\n}\ncommander.parse(process.argv); // 解析命令行参数，触发 action 函数执行逻辑。\n"],"names":["commander","require","fs","path","packageJson","inquirer","templatePath","join","__dirname","templateCssPath","name","version","description","option","action","async","defaultName","opts","defaultPath","process","cwd","answers","prompt","type","message","default","projectName","projectPath","resolve","proName","dir","targetFileName","targetCssFileName","targetPath","targetCssPath","mkdirSync","recursive","templateContent","readFileSync","templateCssContent","modifiedContent","replace","writeFileSync","console","log","error","createReactModule","parse","argv"],"mappings":";aAAA,MAAMA,EAAYC,QAAQ,aAEpBC,EAAKD,QAAQ,MACbE,EAAOF,QAAQ,QACfG,EAAcH,QAAQ,mBACtBI,EAAWJ,QAAQ,YAGnBK,EAAeH,EAAKI,KAAKC,UAAW,qCACpCC,EAAkBN,EAAKI,KAAKC,UAAW,qCAE7CR,EACGU,KAAK,gBACLC,QAAQP,EAAYO,SACpBC,YAAY,kBACZC,OAAO,oBAAqB,gBAC5BA,OAAO,oBAAqB,8BAC5BC,QAAOC,UAEN,MAAMC,EAAchB,EAAUiB,OAAOP,KAC/BQ,EAAclB,EAAUiB,OAAOd,MAAQgB,QAAQC,MAG/CC,QAAgBhB,EAASiB,OAAO,CACpC,CACEC,KAAM,QACNb,KAAM,OACNc,QAAS,yCACTC,QAAST,GAEX,CACEO,KAAM,QACNb,KAAM,OACNc,QAAS,iDACTC,QAASP,KAIPQ,EAAcL,EAAQX,KACtBiB,EAAcxB,EAAKyB,QAAQP,EAAQlB,OAM7CY,eAAiCc,EAASC,GACxC,IACE,MAAMC,EAAiB,YACjBC,EAAoB,YACpBC,EAAa9B,EAAKI,KAAKuB,EAAKC,GAC5BG,EAAgB/B,EAAKI,KAAKuB,EAAKE,GAErC9B,EAAGiC,UAAUL,EAAK,CAAEM,WAAW,IAE/B,MAAMC,QAAwBnC,EAAGoC,aAAahC,EAAc,QACtDiC,QAA2BrC,EAAGoC,aAAa7B,EAAiB,QAI5D+B,EAAkBH,EAAgBI,QACtC,eACA,mBAEIvC,EAAGwC,cAAcR,EAAeK,EAAoB,cAEpDrC,EAAGwC,cAAcT,EAAYO,EAAiB,QACpDG,QAAQC,IAAI,WAAWf,QAAcC,IACtC,CAAC,MAAOe,GACPF,QAAQE,MAAM,+BAAgCA,EAChD,CACF,CA7BIC,CAAkBpB,EADCvB,EAAKI,KAAKoB,EAAaD,GACA,IA8B9C1B,EAAU+C,MAAM5B,QAAQ6B"}