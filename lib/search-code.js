import e from"inquirer";import o from"fs";import t,{dirname as r}from"path";import"chalk";import n from"commander";import{fileURLToPath as a}from"url";const i=JSON.parse(o.readFileSync(t.join(c,"../package.json"),"utf8")).version,c=r(a(import.meta.url)),s=t.join(c,"../code-template");!async function(){n.version(i).action((async()=>{await async function(){const r=(await e.prompt([{type:"input",name:"text",message:"请输入搜索词：",default:"美化滚动条"}])).text;console.log(`您输入了${r}, 正在搜索中...`),async function(r){try{console.log(s);const n=await async function(e,r,n){try{var a;let i=[];const c=await o.readdirSync(e);let s;return s="*"===r?c:c.filter((e=>t.extname(e)===`.${r}`)),console.log(`Files of type .${r} in ${e}:`),(null===(a=s)||void 0===a?void 0:a.length)>0?i=await s.filter((e=>e.indexOf(n)>-1)):(reject(new Error("没有找到匹配的代码片段")),console.log("没有找到匹配的代码片段")),console.log(i),i}catch(o){console.error(`Error reading directory ${e}:`,o)}}(s,"*",r),a=n.map(((e,o)=>({name:e,value:o+1}))),{selectedFileIndex:i}=await e.prompt([{type:"list",name:"selectedFileIndex",message:"请选择代码片段文件:",choices:a}]),c=n[i-1],l=t.join(s,c),m=await o.readFileSync(l,"utf8");console.log(m)}catch(e){console.error(e.message)}}(r)}()}))}(),n.parse(process.argv);
